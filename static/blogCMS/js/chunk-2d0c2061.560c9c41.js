(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-2d0c2061"],{4917:function(e,t,n){"use strict";n.r(t);n("7f7f"),n("cadf"),n("551c"),n("097d");var i=n("9bd2"),a={data:function(){return{columns:[{title:"编号",key:"id"},{title:"分类名称",key:"name"},{title:"分类描述",key:"desc"}],data:[],pagination:{currentPage:1,pageSize:5,total:10},options:{maxHeight:"550"},rowHandle:{edit:{icon:"el-icon-edit",text:"修改",size:"medium",fixed:"right"},remove:{icon:"el-icon-delete",text:"删除",size:"medium",fixed:"right"}},editTemplate:{name:{title:"分类名称",value:"",component:{span:12}},desc:{title:"分类描述",value:"",component:{span:18}}},formOptions:{labelWidth:"80px",labelPosition:"left",saveLoading:!1,gutter:20}}},mounted:function(){var t=this;i.a.get("/category/list").then(function(e){t.data=e})},computed:{currentData:function(){var e=this.pagination.currentPage,t=this.pagination.pageSize;return this.data.slice((e-1)*t,e*t)}},methods:{handleRowEdit:function(e,t){var n=this,a=(e.index,e.row);i.a.post("/category/update",{id:a.id,name:a.name,desc:a.desc}).then(function(e){"OK"===e.msg?(n.formOptions.saveLoading=!0,setTimeout(function(){n.$message({message:"编辑成功",tags:"success"}),t(),n.formOptions.saveLoading=!1},300)):n.$message({message:"编辑失败",tags:"error"})})},handleDialogCancel:function(e){this.$message({message:"取消编辑",tags:"warning"}),e()},handleRowRemove:function(e,t){var n=this,a=(e.index,e.row);i.a.post("/category/delete",{id:a.id}).then(function(e){"OK"===e.msg?(n.$message({message:"删除成功",tags:"success"}),t()):n.$message({message:"删除失败",tags:"error"})})},handleSizeChange:function(e){this.pagination.pageSize=e},handleCurrentChange:function(e){this.pagination.currentPage=e}}},o=n("2877"),s=Object(o.a)(a,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("d2-container",[n("d2-crud",{attrs:{columns:e.columns,data:e.currentData,rowHandle:e.rowHandle,"edit-template":e.editTemplate,options:e.options,"form-options":e.formOptions},on:{"row-edit":e.handleRowEdit,"row-remove":e.handleRowRemove,"dialog-cancel":e.handleDialogCancel}}),n("template",{slot:"footer"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.pagination.currentPage,"page-sizes":[5,10,20,40],"page-size":e.pagination.pageSize,total:e.data.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],2)},[],!1,null,null,null);s.options.__file="index.vue";t.default=s.exports}}]);